<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Nairobi Cherangany Navigation Map</title>

<!-- Leaflet CSS -->
<link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />

<style>
  html, body {
    height: 100%;
    margin: 0;
    padding: 0;
  }
  #map {
    height: 100vh;
    width: 100%;
  }
  .legend {
    background: white;
    padding: 10px;
    line-height: 1.5;
    border-radius: 8px;
    box-shadow: 0 0 15px rgba(0,0,0,0.2);
  }
</style>
</head>
<body>

<div id="map"></div>

<!-- Leaflet JS -->
<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>

<script>
  // Initialize map centered over Cherangany Forest
  const map = L.map('map').setView([0.75, 35.5], 9);

  // Add OpenStreetMap tile layer
  L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
    maxZoom: 19,
    attribution: '&copy; OpenStreetMap contributors'
  }).addTo(map);

  // Function to load GeoJSON and add to map
  function addGeoJSON(file, options = {}) {
    fetch(file)
      .then(res => res.json())
      .then(data => {
        L.geoJSON(data, options).addTo(map);
      })
      .catch(err => console.error(`Error loading ${file}:`, err));
  }

  // Cherangany Forest polygon (green)
  addGeoJSON('cherengany_fblock_wgs84.json', {
    style: { color: 'green', weight: 3, fillOpacity: 0.2 },
    onEachFeature: (feature, layer) => {
      layer.bindPopup(`<b>Cherangany Forest</b>`);
    }
  });

  // Elgeyo Marakwet nurseries (blue markers)
  addGeoJSON('elgeyo_marakwet_county.json', {
    pointToLayer: (feature, latlng) => {
      return L.marker(latlng, {title: feature.properties.name || "Nursery"});
    },
    onEachFeature: (feature, layer) => {
      const name = feature.properties.name || "Tree Nursery";
      const info = feature.properties.info || "";
      layer.bindPopup(`<b>${name}</b><br>${info}`);
    }
  });

  // West Pokot nurseries (orange markers)
  addGeoJSON('west_pokot_county.json', {
    pointToLayer: (feature, latlng) => {
      return L.marker(latlng, {icon: L.icon({
        iconUrl: 'https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon.png',
        iconSize: [25,41],
        iconAnchor: [12,41],
        popupAnchor: [1,-34],
        shadowUrl: 'https://unpkg.com/leaflet@1.9.4/dist/images/marker-shadow.png',
        shadowSize: [41,41]
      })});
    },
    onEachFeature: (feature, layer) => {
      const name = feature.properties.name || "Tree Nursery";
      const info = feature.properties.info || "";
      layer.bindPopup(`<b>${name}</b><br>${info}`);
    }
  });

  // Add a simple legend
  const legend = L.control({position: 'bottomright'});
  legend.onAdd = function(map){
    const div = L.DomUtil.create('div','legend');
    div.innerHTML = `
      <b>Legend</b><br>
      <span style="color:green">&#9632;</span> Cherangany Forest<br>
      <span style="color:blue">&#9679;</span> Elgeyo Marakwet Nurseries<br>
      <span style="color:orange">&#9679;</span> West Pokot Nurseries
    `;
    return div;
  };
  legend.addTo(map);
</script>

</body>
</html>
